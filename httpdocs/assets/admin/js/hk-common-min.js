"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var BJSON={formToJSON:function(e){var r={};return e.forEach(function(e){r[e.name]=e.value||""}),r},stringToJSON:function(e){return JSON.parse(e)},JSONToString:function(e){return JSON.stringify(e)}},BSTRING={getStringNumber:function(e,r){e=parseInt(e,10),$rt="";for(var t=0;t<r-e.toString().length;t++)$rt+="0";return $rt+=e.toString()}},BLOADING={isLoading:!1,show:function(){BLOADING.isLoading=!0,$(".preloader-it").fadeIn("fast"),$("#rb-pre-loader").show()},hide:function(){BLOADING.isLoading=!1,$(".preloader-it").fadeOut("fast"),$("#rb-pre-loader").hide()}},BMONEY={sepa:",",init:function(){$(".rb-money").each(function(){$(this).val(BMONEY.format($(this).val()))}),$(".rb-money-show").each(function(){$(this).text(BMONEY.format($(this).text()))}),$("input.rb-money").change(function(){$(this).val(BMONEY.format($(this).val()))}).focus(function(){"0"==$(this).val()&&$(this).val("")}).focusout(function(){""==$(this).val()&&$(this).val("0")})},format:function(e){if(""==e)return"0";for(var r=(e+"").split("."),t=BMONEY.replace(r[0]),a=t.length,i="",n=1;n<=a;n++)i=(n-1)%3==0&&n>1?t[a-n]+BMONEY.sepa+i:t[a-n]+i;return 2==r.length?i+"."+r[1]:i},replace:function(e){return""==e?"0":(e+"").replace(/,/g,"")}},BVALIDATOR={isEmail:function(e){return new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e)},isPhoneNumber:function(e){return new RegExp(/^(((\(\+\d+\))|(\+\d+))(-|\.|\s)+)?(\d|-|\.|\s){6,20}$/i).test(e)},isNumber:function(e){return/^[-+]?[0-9]+$/.test(e)},isNumberGreaterThanZero:function(e){return/^[+]?[1-9][0-9]*$/.test(e)},isNumberNoneNegative:function(e){return/^[+]?[0-9]+$/.test(e)}},BALERT={TYPE:{success:"success",warning:"warning",error:"error",confirm:"confirm",information:"info"},position:"top-right",loaderBg:"#7a5449",delay:12e3,effect:"fade",showArray:function(e,r,t){for(var a="",i="<ul>",n=0;n<r.length;n++)i+="<li>"+r[n]+"</li>";switch(i+="<ul>",t){case BALERT.TYPE.success:""==e&&(e=" Success"),a="jq-has-icon jq-toast-success",e='<i class="far fa-check-circle"></i> '+e;break;case BALERT.TYPE.warning:""==e&&(e=" Warning"),a="jq-has-icon jq-toast-warning",e='<i class="fas fa-exclamation"></i>'+e;break;case BALERT.TYPE.error:""==e&&(e=" Error"),a="jq-has-icon jq-toast-danger",e='<i class="fas fa-exclamation-triangle"></i>'+e;break;case BALERT.TYPE.information:""==e&&(e=" Information"),a="jq-has-icon jq-toast-info",e='<i class="fas fa-info"></i>'+e}return $.toast().reset("all"),$.toast({heading:e,text:i,position:BALERT.position,loaderBg:BALERT.loaderBg,class:a,hideAfter:BALERT.delay,stack:6,showHideTransition:BALERT.effect}),BLOADING.hide(),!1},showError:function(e){BALERT.show("",e.error,BALERT.TYPE.error)},showOk:function(e){BALERT.show("",e,BALERT.TYPE.success)},show:function(e,r,t){var a="";switch(t){case BALERT.TYPE.success:""==e&&(e=" Success"),a="jq-has-icon jq-toast-success",e='<i class="far fa-check-circle"></i> '+e;break;case BALERT.TYPE.warning:""==e&&(e=" Warning"),a="jq-has-icon jq-toast-warning",e='<i class="fas fa-exclamation"></i>'+e;break;case BALERT.TYPE.error:""==e&&(e=" Error"),a="jq-has-icon jq-toast-danger",e='<i class="fas fa-exclamation-triangle"></i>'+e;break;case BALERT.TYPE.information:""==e&&(e=" Information"),a="jq-has-icon jq-toast-info",e='<i class="fas fa-info"></i>'+e}return $.toast().reset("all"),$.toast({heading:e,text:r,position:BALERT.position,loaderBg:BALERT.loaderBg,class:a,hideAfter:BALERT.delay,stack:6,showHideTransition:BALERT.effect}),BLOADING.hide(),!1}},BMODAL={TYPE:{confirm:"confirm",information:"information"},addArray:function(e){var r=$("<ul></ul>");for($i=0;$i<e.length;$i++)r.append("<li>"+e[i]+"</li>");$("#rb-modal-page-content").html("").append(r)},setText:function(e){$("#rb-modal-page-content").html("").append(e)},setTitle:function(e){$("#rb-modal-page-title").html("").append(e)},setButtonCancel:function(e){$("#rb-modal-page-cancel").html("").append(e)},setButtonOk:function(e){$("#rb-modal-page-ok").html("").append(e)},setType:function(e){var r=$("#rb-modal-page");switch(e){case BMODAL.TYPE.information:BMODAL.setTitle(BOB.getModalTitleOk(r)),BMODAL.setButtonOk(BOB.getModalTextOk(r));break;case BMODAL.TYPE.confirm:BMODAL.setTitle(BOB.getModalTitleConfirm(r)),BMODAL.setButtonOk(BOB.getModalTextConfirm(r))}},show:function(e){var r=BMODAL.hide();e=e||"",$("#rb-modal-page-ok").unbind("click").click(function(){if(BMODAL.hide(),"function"==typeof e)return e()}),r.modal("show")},hide:function(){var e=$("#rb-modal-page");return e.modal("hide"),e}},BFORM={editorOptions:{},editorOptionMins:{toolbarGroups:[{name:"styles"},{name:"basicstyles",groups:["basicstyles","undo"]},{name:"colors"},{name:"paragraph",groups:["list","align"]},{name:"insert"},{name:"others"}]},edtiors:[],classError:"border-danger",reInit:function(){$("input.rb-form, button.rb-form, a.rb-form").unbind("click").click(function(){if(!BLOADING.isLoading){BLOADING.show();var e=$(this),r=null;""!=BOB.getRefId(e)&&(r=$("form#"+BOB.getRefId(e))),r||(r=$("form[name="+BOB.getRefName(e)+"]")),r.submit(function(){return!1});try{CKEDITOR&&"undefined"!=typeof CKEDITOR&&(r.find("textarea.rb-editor").each(function(){var e=$(this);e.val(CKEDITOR.instances[e.attr("id")].getData())}),r.find("textarea.rb-editor-min").each(function(){var e=$(this);e.val(CKEDITOR.instances[e.attr("id")].getData())}),$("input.rb-money").each(function(){$(this).val(BMONEY.replace($(this).val()))}))}catch(e){}if(BFORM.FORM.isValidateForm(r)){var t=BOB.getUrl(e);if(!t||""==t)return r.submit(),!1;var a=function(a){var i={type:"POST",url:a=a||t,success:function(r){BLOADING.hide();var t=BOB.getCallBackAfter(e);if(""!=t&&"function"==typeof window[t])return(0,window[t])(r);BCOMMON.isOk(r)||BALERT.show("",r.error,BALERT.TYPE.error)},error:function(r){BLOADING.hide(),""!=BOB.getFormError(e)&&BALERT.show("",data.formError,BALERT.TYPE.error)}};"1"==BOB.getFormIsMultiPart(e)?(i.data=new FormData(r[0]),i.cache=!1,i.contentType=!1,i.processData=!1):(i.dataType="json",i.data=r.serialize()),$.ajax(i)},i=BOB.getCallBackBefore(e);return""!=i&&"function"==typeof window[i]?((0,window[i])(e)&&a(BOB.getUrl(e)),!1):(a(),!1)}}})},init:function(){BFORM.FORM.editorInit()},FORM:{editorInit:function(){$("textarea.rb-editor").each(function(){$ob=$(this),BFORM.FORM.renderEditor($ob)}),$("textarea.rb-editor-min").each(function(){$ob=$(this),BFORM.FORM.renderEditorMin($ob)})},renderEditorMin:function(e,r){CKEDITOR&&"undefined"!=typeof CKEDITOR&&(CKEDITOR.replace(e.attr("id"),BFORM.editorOptionMins),CKEDITOR.on("instanceReady",function(e){r&&r()}))},renderEditor:function(e,r){CKEDITOR&&"undefined"!=typeof CKEDITOR&&(CKEDITOR.replace(e.attr("id"),BFORM.editorOptions),CKEDITOR.on("instanceReady",function(e){r&&r()}))},isValidate:function(e){var r="";!e||e.val();var t=e.val().trim();if("1"==BOB.getValidateRequired(e)){r=BOB.getValidateRequiredError(e);var a=0;if("none-negative"==BOB.getValidateRequired(e)&&(a=-1),""==t||t==e.attr("placeholder")||parseInt(t,10)<=a&&e.is("select"))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r}if("1"==BOB.getValidateEmailOrTel(e)&&(r=BOB.getValidateEmailOrTelError(e),""!=t&&!BVALIDATOR.isEmail(t)&&BVALIDATOROR.isPhoneNumber(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidateGroupRequired(e)){r=BOB.getValidateGroupRequiredError(e);var i=!0;if($("*[rb-data-group="+BOB.getGroup(e)+"]").each(function(){""!=(t=$(this).is(":checkbox")?$(this).is(":checked")?$(this).val():"":$(this).val())&&(i=!1)}),i)return e.removeClass(BFORM.classError).addClass(BFORM.classError),r}if("1"==BOB.getValidateNumber(e)&&(r=BOB.getValidateNumberError(e),""!=t&&!BVALIDATOR.isNumber(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidateZipcodeFormat(e)&&(r=BOB.getValidateZipcodeFormatError(e),""!=t&&!BVALIDATOR.isNumberNoneNegative(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidateNonNegative(e)&&(r=BOB.getValidateNonNegativeError(e),""!=t&&!BVALIDATOR.isNumberNoneNegative(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidatePhoneNumber(e)&&(r=BOB.getValidatePhoneNumberError(e),""!=t&&!BVALIDATOR.isPhoneNumber(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidateNotExist(e)&&""!=t){r=BOB.getValidateNotExistError(e),id=$("."+BOB.getRefClass(e)).val();var n=!1;if($.ajax({url:BOB.getUrl(e),type:"POST",async:!1,data:{params:BOB.getParams(e),val:t,id:id},success:function(e){BCOMMON.isOk(e)&&0!=parseInt(e.data.isExist,10)&&(n=!0)},error:function(e){n=!0}}),n)return e.removeClass(BFORM.classError).addClass(BFORM.classError),r}if("1"==BOB.getValidateEmail(e)&&(r=BOB.getValidateEmailError(e),""!=t&&!BVALIDATOR.isEmail(t)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if(""!=BOB.getValidateMin(e)&&(r=BOB.getValidateMinError(e),""!=t&&t.length<parseInt(BOB.getValidateMin(e),10)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if(""!=BOB.getValidateMax(e)&&(r=BOB.getValidateMaxError(e),""!=t&&t.length>parseInt(BOB.getValidateMax(e),10)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if(""!=BOB.getValidateNumberMin(e)&&(r=BOB.getValidateNumberMinError(e),""==t||parseInt(t,10)<parseInt(BOB.getValidateNumberMin(e),10)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if(""!=BOB.getValidateNumberMax(e)&&(r=BOB.getValidateNumberMaxError(e),""==t||parseInt(t,10)>parseInt(BOB.getValidateNumberMax(e),10)))return e.removeClass(BFORM.classError).addClass(BFORM.classError),r;if("1"==BOB.getValidateConfirm(e)){r=BOB.getValidateConfirmError(e);var o=null;""!=BOB.getRefId(e)&&(o=$("#"+BOB.getRefId(e))),o||(o=$("input."+BOB.getRefClass(e))),!o||o.val();var s=o.val().trim();if(t!=s&&""!=s)return e.removeClass(BFORM.classError).addClass(BFORM.classError),r}if("1"==BOB.getValidateCustom(e)){var c=BOB.getValidateCustomCallback(e);if(""!=c){var l=window[c];return"function"==typeof l?0!==(r=l(e))?(e.removeClass(BFORM.classError).addClass(BFORM.classError),r):(e.removeClass(BFORM.classError),0):(e.removeClass(BFORM.classError).addClass(BFORM.classError),BOB.getValidateCustomError(e))}}return e.removeClass(BFORM.classError),0},isValidateForm:function(e){var r=[];return e.find("input.rb-check, textarea.rb-check, select.rb-check").each(function(){var e=BFORM.FORM.isValidate($(this));0!==e&&r.push(e)}),!(r.length>0)||(BALERT.showArray("",r,BALERT.TYPE.error),!1)}},CHECKBOX:{isCheckedOne:function(e){var r=!1;return e.each(function(){BFORM.CHECKBOX.isChecked($(this))&&(r=!0)}),r},isCheckedAll:function(e){var r=!0;return e.each(function(){BFORM.CHECKBOX.isChecked($(this))||(r=!1)}),r},isChecked:function(e){return e.is(":checked")},check:function(e,r){e.prop("checked",r)},checkAllList:function(e,r){e.each(function(){BFORM.CHECKBOX.check($(this),r)})}},SELECT:{setSelected:function(e,r=""){if(""==r){var t=BOB.getSelected(e);""==t?e.val(e.find("option:first").val()):e.val(t)}else e.val(r)},addOption:function(e,r){e.html(""),r=r.data;for(var t=0;t<r.length;t++){var a=$('<option value=""></option>');a.text(r[t].name),a.val(r[t].id),e.append(a)}BFORM.SELECT.addOptionPlaceholder(e)},addOptionPlaceholder:function(e){if(e.attr("placeholder")){var r=$('<option value=""></option>');r.text(e.attr("placeholder")),r.val("-1"),e.prepend(r),window.location.pathname.indexOf("/add")>=0&&e.val("-1")}1==e.find("> option").length&&e.val("-1"),BFORM.SELECT.setSelected(e)}}},BAJAX={METHOD_GET:"GET",METHOD_POST:"POST",error:function(e){BLOADING.hide(),BALERT.show("Error","Vui lòng kiểm tra lại đường truyền và thử lại ! <br/> Can not connect to server, please checking your internet and try again !",BALERT.TYPE.error)},send:function(e,r,t,a){a=a||"GET",$.ajax({type:a,url:e,dataType:"json",data:r,success:t,error:BAJAX.error})}},BCOMMON={ACTIVE_CLASS:"-active",VOID:"javascript:void(0);",isOk:function(e){return 0==parseInt(e.status,10)},reInit:function(){$("select.rb-source-reinit").each(function(){var e=$(this),r=BOB.getUrl(e);r&&BAJAX.send(r,{params:BOB.getParams(e)},function(r){BLOADING.hide(),BCOMMON.isOk(r)&&(BFORM.SELECT.addOption(e,r.data),e.trigger("change"))})}),$(".rb-reinit-action").each(function(){var e=$(this);e.unbind("click").click(function(){var r=BOB.getUrl(e);if(""!=r){var t=e.attr("rb-callback-before-show");if("function"==typeof window[t])if(!(0,window[t])(e))return;var a=function(){BAJAX.send(r,{id:BOB.getId(e),params:BOB.getParams(e)},function(r){var t=BOB.getCallBackAfter(e);if("function"==typeof window[t])return(0,window[t])(r)},BOB.getMethod(e))};if("1"==BOB.getIsConfirm(e))return BMODAL.setText(BOB.getIsConfirmText(e)),BMODAL.setTitle(BOB.getModalTitleConfirm(e)),BMODAL.setButtonOk(BOB.getModalTextConfirm(e)),""==BOB.getModalTitleConfirm(e)&&BMODAL.setType(BMODAL.TYPE.confirm),void BMODAL.show(function(){var r=BOB.getCallBackBefore(e);"function"!=typeof window[r]?a():(0,window[r])(e)&&a()});var i=BOB.getCallBackBefore(e);if("function"==typeof window[i])return void((0,window[i])(e)&&a());a()}})})},init:function(){$("select.rb-placeholder").each(function(){var e=$(this);BFORM.SELECT.addOptionPlaceholder(e)}),$("select.rb-source-ref").each(function(){var e=$(this);if(""!=BOB.getRefClass(e)){var r=$("select."+BOB.getRefClass(e));r&&r.change(function(){var r=BOB.getUrl(e);if(r){BLOADING.show();var t=$(this).val();BAJAX.send(r,{cate_id:t,params:BOB.getParams(e)},function(r){BLOADING.hide(),BCOMMON.isOk(r)&&(BFORM.SELECT.addOption(e,r.data),e.trigger("change"))})}})}}),$("select.rb-source").each(function(){var e=$(this),r=BOB.getUrl(e);r&&BAJAX.send(r,{params:BOB.getParams(e)},function(r){BLOADING.hide(),BCOMMON.isOk(r)&&(BFORM.SELECT.addOption(e,r.data),e.trigger("change"))})})}};$(function(){BCOMMON.init(),BCOMMON.reInit(),BFORM.init(),BFORM.reInit(),BMONEY.init()});